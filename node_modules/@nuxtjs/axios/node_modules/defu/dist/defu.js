'use strict';

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function (obj) {
      return typeof obj;
    };
  } else {
    _typeof = function (obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

function isObject(val) {
  return val !== null && _typeof(val) === 'object' && !Array.isArray(val);
}

function _defu(baseObj, defaults) {
  if (!isObject(baseObj)) {
    return _defu({}, defaults);
  }

  if (!isObject(defaults)) {
    return _defu(baseObj, {});
  }

  var obj = Object.assign({}, defaults);

  for (var _key in baseObj) {
    if (_key === '__proto__' || _key === 'constructor') {
      continue;
    }

    var val = baseObj[_key];

    if (val === null) {
      continue;
    }

    if (isObject(val) && isObject(obj[_key])) {
      obj[_key] = _defu(val, obj[_key]);
    } else {
      obj[_key] = val;
    }
  }

  return obj;
}

function defu() {
  for (var _len = arguments.length, args = new Array(_len), _key2 = 0; _key2 < _len; _key2++) {
    args[_key2] = arguments[_key2];
  }

  return args.reduce(_defu, {});
}

module.exports = defu;
